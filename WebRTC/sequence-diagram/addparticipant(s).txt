@startuml

title Adding Participant to a Chat Group Sequence

' Diagram for adding participant to a Chat Group
' Rajender Saini
' WebRTC Api


participant "Endpoint A" as EPA
participant "AT&T API Gateway" as Gateway
participant "Endpoint B" as EPB
participant "Endpoint C" as EPC

note over EPA, EPC
1. Endpoints have valid session established with gateway.
2. Endpoints have established event channel to get notification of network events. 
end note


autonumber 2
loop Long polling 
EPA->Gateway: GET /sessions/{sessionId}/events
end

autonumber 3
EPA -> Gateway : POST /sessions/{sessionId}/groups/{groupId}/participants(participants list)
Gateway-->EPA: 204 | No content



note over Gateway, EPB
Destination endpoint will receive invitation event on event channel.
end note
autonumber 2
loop Long polling
EPB->Gateway: GET /sessions/{sessionId}/events
Gateway-->EPB:Event(type=groups, subtype=invitation)
end

note over Gateway, EPC
Other endpoint(s) will receive info event on event channel.
end note
autonumber 2
loop Long polling
EPC->Gateway: GET /sessions/{sessionId}/events
Gateway-->EPC:Event(type=groups, subtype=info)
end
@enduml