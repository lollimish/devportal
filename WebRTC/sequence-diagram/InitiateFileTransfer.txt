@startuml
title Initiate File Transfer Sequence
hide footbox
participant "Endpoint A" as EPA
participant "AT&T API Gateway" as Gateway
participant "Endpoint B" as EPB
autonumber
note over EPA, EPB
1. Endpoints have valid session established with gateway.
2. Endpoints have established event channel to get notification of network events. 

end note


loop Long polling 
EPA->Gateway: GET /sessions/{sessionId}/events
end
EPA -> Gateway:POST /sessions/{sessionId}/files(file)
Gateway-->EPA: 202 Accepted (location)
autonumber 

loop Long polling 
EPB->Gateway: GET /sessions/{sessionId}/events
Gateway-->EPB: 200 OK event(type=files, subType=transfer, state=invitation-received)
end
@enduml