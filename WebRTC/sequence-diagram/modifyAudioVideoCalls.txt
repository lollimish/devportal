@startuml

hide footbox

title  <b><u>Ongoing call dialogue modifications</u></b>

participant "<b>WebRTC App" as browser
participant "<b>APIGW" as apig


note over browser  
 1. User is registered and 
does have a <b>session ID</b>
2. User received an invitation for call over 
the event channel.
end note 
group 1. <b>Accept/Answer an audio video calls  
browser->apig : <b>HTTP PUT</b>   /v1/sessions/{sessionId}/calls/{callId}(sdp,header:call-answer)
note over apig 
    <b>"session-open"</b> - sent to caller
      
end note
apig-->browser :HTTP 204 No Content (state:accepted)

end

note over browser  
1. User is registered and 
does have a <b>session ID</b>
2. state of call is <b>"session-open".
end note 
group 2. <b>Initiate audio video session modifications  
browser->apig : <b>HTTP PUT</b>   /v1/sessions/{sessionId}/calls/{callId}(sdp,header:initiate-call-mod)
note over apig 
    modified SDP - sent to the peer
end note
apig-->browser :HTTP 204 No Content (state:mod-sent,modID)

end


note over browser  
1. User is registered and 
does have a <b>session ID</b>
2. state of call is <b>"session-open".
end note 
group 3. <b>Initiate audio video call HOLD  
browser->apig : <b>HTTP PUT</b>   /v1/sessions/{sessionId}/calls/{callId}(sdp->a:recvonly,header:initiate-call-hold)
note over apig 
    modified SDP[a:recvonly] - sent 
    to the peer 
end note
apig-->browser :HTTP 204 No Content (state:mod-sent,modID)

end

note over browser  
1. User is registered and 
does have a <b>session ID</b>
2. state of call is <b>"session-open".
end note 
group 4. <b>Initiate audio video call RESUME  
browser->apig : <b>HTTP PUT</b>   /v1/sessions/{sessionId}/calls/{callId}(sdp->a:sendrecv,header:initiate-call-resume)
note over apig 
    modified SDP[a:sendrecv] - sent 
    to the peer
end note
apig-->browser :HTTP 204 No Content (state:mod-sent,modID)

end


note over browser  
1. User is registered and 
does have a <b>session ID</b>
2. state of call is <b>"session-open".
end note 
group 5. <b>Accept call modification  
browser->apig : <b>HTTP PUT</b>   /v1/sessions/{sessionId}/calls/{callId}(modID,sdp,header:accept-call-mod)
note over apig 
    modified SDP,modID - sent 
    to the peer
end note
apig-->browser :HTTP 204 No Content (state:mod-accepted)

end

note over browser  
1. User is registered and 
does have a <b>session ID</b>
2. state of call is <b>"session-open".
end note 
group 6. <b>Reject/Cancel call modification  
browser->apig : <b>HTTP PUT</b>   /v1/sessions/{sessionId}/calls/{callId}(modID,sdp,header:rejectCancel-call-mod)
note over apig 
    Reject modID - sent 
    to the peer
end note
apig-->browser :HTTP 204 No Content

end



@enduml