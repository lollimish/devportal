@startuml

title Associate User/VTN(Virtual Telephone Number) to the access token


participant "WebRTC App" as App
participant "Developer Hosted Server" as DHS
participant "AT&T API Gateway" as GW
hide footbox
autonumber 
App->DHS: Get App JS with Access Token
DHS->GW: POST /oauth/token (appKey,secret,scope=WEBRTC, grant_type=client_credential)
GW-->DHS: 200 OK (access_token,refresh_token,expires_in)

note over DHS
1. User name is used in NoTN case.
2. An optional ongoing session Id can be passed to associate
   a refresh token with a user name or VTN..
end note
alt VTN / NoTN case 
DHS->GW: PUT /userIds/{useId}(token,{userName | VTN}[,sessionId])
GW-->DHS: 204 No Content
end


DHS-->App: 200 OK(JS + token embedded)
@enduml